(this["webpackJsonpinstagram-ui"]=this["webpackJsonpinstagram-ui"]||[]).push([[0],{153:function(e,t,a){e.exports=a(324)},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(48),s=a.n(l),c=(a(158),a(159),a(10)),o=a(11),i=a(14),m=a(12),u=a(15),d=a(24),h=a(327),p=a(328),E=(a(160),a(17)),g=a(18),b={development:{apiUrl:"http://localhost:4000"},production:{apiUrl:"https://instagram-api-ziki.herokuapp.com"}}.production,f=a(27),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={user:null},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(b.apiUrl+"/api/users/me",{credentials:"include"}).then((function(e){return e.json()})).then((function(t){e.setState({user:t})}))}},{key:"logoutHandler",value:function(e){this.props.history.push("/login"),this.setState({user:null}),document.cookie="user= ; expires="+(new Date).toString(),console.log("Logged out")}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.user?r.a.createElement("span",null,this.state.user.username,r.a.createElement("button",{onClick:this.logoutHandler.bind(this)},"Log Out")):r.a.createElement("div",null,r.a.createElement(d.b,{to:"/register"},"Register"),r.a.createElement(d.b,{to:"/login"},r.a.createElement("div",null,"Login"))))}}]),t}(n.Component),N=Object(f.f)(v),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={toggle:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"switchHandler",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"render",value:function(){return r.a.createElement(h.a,{bg:"light",expand:"lg"},r.a.createElement(h.a.Brand,{href:"#home"},"Instagram"),r.a.createElement(h.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(h.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(d.b,{className:"nav-link",to:"/"},"Home"),r.a.createElement(d.b,{className:"nav-link",to:"/profile"},"Profile"),r.a.createElement(d.b,{className:"nav-link",to:"/post/create"},"Create Post")),r.a.createElement("div",{inline:"true"},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement(g.a,{icon:E.g}),r.a.createElement(N,null)),r.a.createElement("div",{className:"user-text"})))))}}]),t}(r.a.Component),O=a(145),y=(a(169),a(170),function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.tags.map((function(e,t){return r.a.createElement("div",{key:t,className:"tag"},r.a.createElement("a",{href:"#"},"#",e))})))}}]),t}(n.Component)),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={heart:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"hearthHandler",value:function(){this.setState({heart:!this.state.heart})}},{key:"render",value:function(){var e=this.state.heart?"heart":"";return r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("span",{className:"cardDate"},r.a.createElement(g.a,{icon:E.a}),r.a.createElement("span",{className:"card-text"},this.props.created)),r.a.createElement("div",{className:"userId"},r.a.createElement(g.a,{icon:E.h}),this.props.user)),r.a.createElement("div",{className:"userImage"},r.a.createElement("img",{src:b.apiUrl+"/"+this.props.image,alt:"post-image",className:"card-img-top"})),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",null,r.a.createElement("h4",null,this.props.about),r.a.createElement("h5",{key:this.props.id,className:"card-title"},r.a.createElement(g.a,{icon:E.c}),this.props.title)),r.a.createElement("div",{className:"like"},r.a.createElement("p",{className:"card-text"},r.a.createElement(g.a,{className:e,icon:E.d,onClick:this.hearthHandler.bind(this)}),this.props.likes)),r.a.createElement("footer",{className:"card-footer"},r.a.createElement(y,{tags:this.props.tags})))))}}]),t}(n.Component),k=(a(171),a(146)),S=a(5);a(194);function x(){var e=Object(O.a)(["\n            display:block;\n            margin: 0 auto;\n            border-color:#5798ff;\n        "]);return x=function(){return e},e}var D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={posts:[],loading:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),fetch(b.apiUrl+"/api/posts").then((function(e){return e.json()})).then((function(t){e.setState({posts:t}),console.log(t),e.setState({posts:t,loading:!1})}))}},{key:"formatDate",value:function(e){var t=new Date(e);return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+t.getDate()+" "+t.getFullYear()}},{key:"render",value:function(){var e=this,t=Object(S.css)(x());return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"loading"},this.state.loading?r.a.createElement("div",null,r.a.createElement(k.GridLoader,{css:t,sizeUnit:"px",size:80,color:"#5798ff",loading:this.state.loading})):null),r.a.createElement("div",{className:"container"},this.state.posts.map((function(t,a){return r.a.createElement(w,{title:t.title,image:t.image,created:e.formatDate(t.created),likes:t.likes,key:t._id,user:t.user.username,tags:t.tags,about:t.about})}))))}}]),t}(n.Component),C=a(4),F=a(16),T=F.object().shape({username:F.string().min(2).max(255).required(),password:F.string().min(2).max(16).required()}),M=a(326),P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={incorrectLoginMessage:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;this.setState({incorrectLoginMessage:!1}),fetch("http://localhost:4000/api/users/login",{method:"POST",body:JSON.stringify(e),credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status?t.props.history.push("/"):403===e.status?t.setState({incorrectLoginMessage:!0}):console.log("Unexpected error")}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement("hr",null),r.a.createElement(C.d,{initialValues:{username:"",password:""},validationSchema:T,onSubmit:this.submit.bind(this)},r.a.createElement(C.c,{className:"col-xs-12 col-md-6"},this.state.incorrectLoginMessage?r.a.createElement("div",{className:"row alert alert-danger mt-2"},"Incorrect username or password"):null,r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement(C.b,{name:"username",id:"username",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"username",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement(C.b,{type:"password",name:"password",id:"password",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"password",component:"div"})),r.a.createElement("div",{className:"row form-group d-flex justify-content-end"},r.a.createElement(M.a,{type:"submit"},"Login")))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={users:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(b.apiUrl+"/api/users",{credentials:"include",method:"GET"}).then((function(e){return e.json()})).then((function(t){e.setState({users:t}),console.log(t)}))}},{key:"render",value:function(){return r.a.createElement("div",null,"Profile:",this.state.users.map((function(e,t){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",null,r.a.createElement(g.a,{icon:E.g}),"   user name : ",e.username),r.a.createElement("div",null,r.a.createElement(g.a,{icon:E.i}),"   user gender : ",e.gender),r.a.createElement("div",null,r.a.createElement(g.a,{icon:E.f}),"   user about : ",e.about))})))}}]),t}(n.Component),L=F.object().shape({title:F.string().min(2).max(255).required(),image:F.mixed().required(),tags:F.string(),about:F.string()}),q=(a(323),a(149)),A=a.n(q),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={tags:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleTagsChange",value:function(e){this.setState({tags:e})}},{key:"convertToFormData",value:function(e){var t=new FormData,a=function(a){Array.isArray(e[a])?e[a].forEach((function(e){return t.append(a+"[]",e)})):t.append(a,e[a])};for(var n in e)a(n);return t}},{key:"submit",value:function(e){var t=this.convertToFormData(e);fetch(b.apiUrl+"/api/posts",{method:"POST",body:t,credentials:"include"}).then((function(e){return e.json()})).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"CreatePost"},r.a.createElement("h2",null,"Create Post"),r.a.createElement(C.d,{initialValues:{image:"",about:"",title:"",tags:[]},validationSchema:L,onSubmit:this.submit.bind(this),render:function(t){var a=t.setFieldValue;return r.a.createElement(C.c,{className:"col-xs-12 col-md-6"},r.a.createElement("div",{className:"row form-group"},r.a.createElement("input",{type:"file",name:"image",id:"image",onChange:function(e){a("image",e.currentTarget.files[0])}}),r.a.createElement("label",{htmlFor:"image",className:"upload-button"},r.a.createElement("span",null,r.a.createElement(g.a,{icon:E.b}),"Select an image")),r.a.createElement("div",{className:"container-fluid row"},r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"image",component:"div"}))),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",null,"About:"),r.a.createElement(C.b,{as:"textarea",name:"about",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"about",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",null,"Title:"),r.a.createElement(C.b,{as:"textarea",name:"title",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"title",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",null,"Tags:"),r.a.createElement(A.a,{value:e.state.tags,onChange:function(t){e.handleTagsChange(t),a("tags",t)},className:"tags-wrapper"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"tags",component:"div"}),r.a.createElement("div",null,r.a.createElement("sub",null,"Press Enter after inserting a tag"))),r.a.createElement("div",{className:"row form-group d-flex justify-content-end"},r.a.createElement(M.a,{type:"submit"},r.a.createElement(g.a,{icon:E.e}),"\xa0 Share")))}}))}}]),t}(n.Component),H=F.object().shape({name:F.string().min(2).max(255).required(),username:F.string().min(2).max(255).required(),password:F.string().min(2).max(16).required(),gender:F.string().required(),birthDate:F.date().required(),about:F.string()}),I=function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(e){var t=this;fetch("http://localhost:4000/api/users",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){return t.props.history.push("/")}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Registration"),r.a.createElement("hr",null),r.a.createElement(C.d,{initialValues:{name:"",username:"",password:"",birthDate:new Date,gender:"m",about:""},validationSchema:H,onSubmit:this.submit.bind(this)},r.a.createElement(C.c,{className:"col-xs-12 col-md-6"},r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement(C.b,{name:"name",id:"name",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"name",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement(C.b,{name:"username",id:"username",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"username",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement(C.b,{type:"password",name:"password",id:"password",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"password",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"birthDate"},"Birth Date:"),r.a.createElement(C.b,{type:"date",name:"birthDate",id:"birthDate",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"birthDate",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"gender"},"Gender:"),r.a.createElement(C.b,{component:"select",name:"birthDate",id:"gender",className:"form-control"},r.a.createElement("option",{value:"m"},"Male"),r.a.createElement("option",{value:"f"},"Female")),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"birthDate",component:"div"})),r.a.createElement("div",{className:"row form-group"},r.a.createElement("label",{htmlFor:"about"},"About:"),r.a.createElement(C.b,{as:"textarea",id:"about",name:"about",className:"form-control"}),r.a.createElement(C.a,{className:"alert alert-danger mt-2",name:"about",component:"div"})),r.a.createElement("div",{className:"row form-group d-flex justify-content-end"},r.a.createElement(M.a,{type:"submit"},"Register")))))}}]),t}(n.Component),B=Object(f.f)(I),V=a(152),z=a(39),G=a(151),R={items:[],item:{}},W=Object(z.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),Y=[G.a],$=Object(z.d)(W,{},z.a.apply(void 0,Y));var _=function(){return r.a.createElement(V.a,{store:$},r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(j,null),r.a.createElement("main",null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/profile"},r.a.createElement(U,null)),r.a.createElement(f.a,{path:"/post/create"},r.a.createElement(J,null)),r.a.createElement(f.a,{path:"/register"},r.a.createElement(B,null)),r.a.createElement(f.a,{path:"/login"},r.a.createElement(P,null)),r.a.createElement(f.a,{path:"/"},r.a.createElement(D,null)))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[153,1,2]]]);
//# sourceMappingURL=main.015be38b.chunk.js.map